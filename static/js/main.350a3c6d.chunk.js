(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{41:function(e,t,o){},55:function(e,t,o){},56:function(e,t,o){"use strict";o.r(t);var n=o(11),i=o(8),r=o.n(i),a=o(26),s=o.n(a),c=(o(41),o(14)),d=o(27),l=o(28),u=o(17),h=o.n(u),p=o(22),f=(o(54),o(12)),g=o(23),m=o(15),y=o(3),b=o(1),j=o(21),O=o(34),v=o(35),M=o(16),w=o(4),I=o(0),T=o(7),C=Object(c.a)({},M.a);C.onSetup=function(e){var t,o,n=(e=e||{}).featureId,i=this.getSelected().filter((function(e){return"Polygon"===e.type||"MultiPolygon"===e.type})).map((function(e){return e.toGeoJSON()}));if(i.length<1)throw new Error("Please select a feature/features (Polygon or MultiPolygon) to split!");var r="forward";if(n){if(!(t=this.getFeature(n)))throw new Error("Could not find a feature with the provided featureId");var a=e.from;if(a&&"Feature"===a.type&&a.geometry&&"Point"===a.geometry.type&&(a=a.geometry),a&&"Point"===a.type&&a.coordinates&&2===a.coordinates.length&&(a=a.coordinates),!a||!Array.isArray(a))throw new Error("Please use the `from` property to indicate which point to continue the line from");var s=t.coordinates.length-1;if(t.coordinates[s][0]===a[0]&&t.coordinates[s][1]===a[1]){var c;o=s+1,(c=t).addCoordinate.apply(c,[o].concat(Object(f.a)(t.coordinates[s])))}else{if(t.coordinates[0][0]!==a[0]||t.coordinates[0][1]!==a[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");var d;r="backwards",o=0,(d=t).addCoordinate.apply(d,[o].concat(Object(f.a)(t.coordinates[0])))}}else t=this.newFeature({type:I.k.FEATURE,properties:{},geometry:{type:I.k.LINE_STRING,coordinates:[]}}),o=0,this.addFeature(t);return this.clearSelectedFeatures(),w.a.disable(this),this.updateUIClasses({mouse:I.i.ADD}),this.activateUIButton(I.p.LINE),this.setActionableState({trash:!0}),{main:i,line:t,currentVertexPosition:o,direction:r}},C.onStop=function(e){var t=this;w.a.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.line.id)&&(e.line.removeCoordinate("".concat(e.currentVertexPosition)),e.line.isValid()?(e.main.forEach((function(o){if(Object(m.a)(Object(b.i)(e.line.coordinates[0]),o)||Object(m.a)(Object(b.i)(e.line.coordinates[e.line.coordinates.length-1]),o))throw new Error("Line must be outside of Polygon");(function(e,t,o){var n,i,r,a,s,c,d,l,u,h="kilometers",p=.001,f=[],M=[],w=[],I=[],T=null;if("Polygon"!=e.type&&"MultiPolygon"!=e.type||"LineString"!=t.type)return T;"undefined"===typeof o&&(o="");if(0==Object(g.a)(e,t).features.length)return T;var C=Object(y.b)(t);if(Object(m.a)(Object(b.i)(C[0]),e)||Object(m.a)(Object(b.i)(C[C.length-1]),e))return T;for(I[0]=Object(j.a)(t,p,{units:h}),I[1]=Object(j.a)(t,-p,{units:h}),n=0;n<=1;n++){for(a=n,s=(n+1)%2,f=[],i=0;i<t.coordinates.length;i++)f.push(t.coordinates[i]);for(i=I[a].geometry.coordinates.length-1;i>=0;i--)f.push(I[a].geometry.coordinates[i]);for(f.push(t.coordinates[0]),c=Object(b.f)(f),d=Object(O.a)(c),l=Object(v.a)(e,d),M=[],i=0;i<l.geometry.coordinates.length;i++)u=Object(b.j)(l.geometry.coordinates[i]),Object(g.a)(u,I[s]).features.length>0&&M.push(u.geometry.coordinates);M.forEach((function(e,t){r=o+(n+1)+"."+(t+1),w.push(Object(b.j)(e,{id:r}))}))}w.length>0&&(T=Object(b.b)(w));return T})(o.geometry,e.line.toGeoJSON().geometry,"piece-").features.forEach((function(e){var o=t.newFeature(e);t.addFeature(o)})),t.deleteFeature([o.id],{silent:!0})})),this.deleteFeature([e.line.id],{silent:!0})):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(I.n.SIMPLE_SELECT,{},{silent:!0})))},C.toDisplayFeatures=function(e,t,o){var n=t.properties.id===e.line.id;if(t.properties.active=n?I.g.ACTIVE:I.g.INACTIVE,!n)return o(t);t.geometry.coordinates.length<2||(t.properties.meta=I.m.FEATURE,o(Object(T.a)(e.line.id,t.geometry.coordinates["forward"===e.direction?t.geometry.coordinates.length-2:1],"".concat("forward"===e.direction?t.geometry.coordinates.length-2:1),!1)),o(t))};var E=C;o(55);var z,N,F,P=function(){function e(t){Object(d.a)(this,e);var o=this;o.draw=t.draw,o.buttons=t.buttons||[],o.onAddOrig=t.draw.onAdd,o.onRemoveOrig=t.draw.onRemove}return Object(l.a)(e,[{key:"onAdd",value:function(e){var t=this;return t.map=e,t.elContainer=t.onAddOrig(e),t.buttons.forEach((function(e){t.addButton(e)})),t.elContainer}},{key:"onRemove",value:function(e){var t=this;t.buttons.forEach((function(e){t.removeButton(e)})),t.onRemoveOrig(e)}},{key:"addButton",value:function(e){var t=document.createElement("button");t.className="mapbox-gl-draw_ctrl-draw-btn",e.classes instanceof Array&&e.classes.forEach((function(e){t.classList.add(e)})),t.addEventListener(e.on,e.action),this.elContainer.appendChild(t),e.elButton=t}},{key:"removeButton",value:function(e){e.elButton.removeEventListener(e.on,e.action),e.elButton.remove()}}]),e}();var S=function(){"unavailable"===h.a.getRTLTextPluginStatus()&&h.a.setRTLTextPlugin("https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js",(function(e){e&&console.error(e)}),!0);var e=Object(i.useRef)(null);Object(i.useEffect)((function(){z=new h.a.Map({container:e.current||"",style:"https://map.ir/vector/styles/main/mapir-xyz-light-style.json",center:[51.3857,35.6102],zoom:10,pitch:0,interactive:!0,hash:!0,attributionControl:!0,customAttribution:"\xa9 Map \xa9 Openstreetmap",transformRequest:function(e){return{url:e,headers:{"x-api-key":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImRiZWU0YWU4OTk4OTA3MmQ3OTFmMjQ4ZDE5N2VhZTgwZWU2NTUyYjhlYjczOWI2NDdlY2YyYzIzNWRiYThiMzIzOTM5MDkzZDM0NTY2MmU3In0.eyJhdWQiOiI5NDMyIiwianRpIjoiZGJlZTRhZTg5OTg5MDcyZDc5MWYyNDhkMTk3ZWFlODBlZTY1NTJiOGViNzM5YjY0N2VjZjJjMjM1ZGJhOGIzMjM5MzkwOTNkMzQ1NjYyZTciLCJpYXQiOjE1OTA4MjU0NzIsIm5iZiI6MTU5MDgyNTQ3MiwiZXhwIjoxNTkzNDE3NDcyLCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.M_z4xJlJRuYrh8RFe9UrW89Y_XBzpPth4yk3hlT-goBm8o3x8DGCrSqgskFfmJTUD2wC2qSoVZzQKB67sm-swtD5fkxZO7C0lBCMAU92IYZwCdYehIOtZbP5L1Lfg3C6pxd0r7gQOdzcAZj9TStnKBQPK3jSvzkiHIQhb6I0sViOS_8JceSNs9ZlVelQ3gs77xM2ksWDM6vmqIndzsS-5hUd-9qdRDTLHnhdbS4_UBwNDza47Iqd5vZkBgmQ_oDZ7dVyBuMHiQFg28V6zhtsf3fijP0UhePCj4GM89g3tzYBOmuapVBobbX395FWpnNC3bYg7zDaVHcllSUYDjGc1A","Mapir-SDK":"reactjs"}}}}),N=new p.a({modes:Object(c.a)(Object(c.a)({},p.a.modes),{},{splitPolygunMode:E}),userProperties:!0}),F=new P({draw:N,buttons:[{on:"click",action:t,classes:["split-icon"]}]}),z.once("load",(function(){z.resize(),z.addControl(F,"top-right"),N.set({type:"FeatureCollection",features:[{type:"Feature",properties:{},id:"example-id",geometry:{type:"Polygon",coordinates:[[[51.41742415918904,35.73019558439101],[51.31319413385742,35.702773908694724],[51.378997493472525,35.665562843119986],[51.45008537540798,35.67776544979942],[51.46619566741822,35.70822028156377],[51.41742415918904,35.73019558439101]]]}}]})}))}),[]);var t=function(){try{var e;null===(e=N)||void 0===e||e.changeMode("splitPolygonMode")}catch(t){console.error(t)}};return Object(n.jsx)("div",{className:"map-wrapper",children:Object(n.jsx)("div",{id:"map",ref:e})})},D=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,57)).then((function(t){var o=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;o(e),n(e),i(e),r(e),a(e)}))};s.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(S,{})}),document.getElementById("root")),D()}},[[56,1,2]]]);
//# sourceMappingURL=main.350a3c6d.chunk.js.map